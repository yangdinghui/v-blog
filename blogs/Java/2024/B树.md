---
title: B-tree如何使数据查询更快？
date: 2024-03-01
tags:
 - 数据结构
categories:
 -  Java
---
#### B 树是一种有助于搜索大量数据的结构。它是 40 多年前发明的，但仍然被大多数现代数据库所采用。尽管有更新的索引结构，例如 LSM 树，但 B 树在处理大多数数据库查询时是不败的。
#### 二叉搜索树 (BST)
##### 那么“B”代表什么？
据wikipedia.org报道，B 树的发明者 Edward M. McCreight 曾说过：**“你越多地思考 B 树中的 B 的含义，你就越能理解 B 树。”**   
一个简单的二叉搜索树(BST)示例     
<img src="/B/bst-basic.webp" width="30%">  
较大的数字始终位于右侧，较小的数字始终位于左侧。  
<img src="/B/bst-bigger.webp" width="50%">    
这棵树包含七个数字，但是我们最多需要访问三个节点才能找到任何数字。以下示例可视化搜索 14。我使用 SQL 定义查询，以便将这棵树视为实际的数据库索引。  
<img src="/B/bst-bigger-searching.webp" width="50%">   
#### 考虑硬件存储  
从理论上讲，使用二叉搜索树来运行我们的查询看起来不错。它的时间复杂度（搜索时）与 O(logn)B 树相同。但是，在实践中，此数据结构需要在实际硬件上工作。索引必须存储在计算机上的某个位置。  
计算机有三个可以存储数据的位置：
- CPU 缓存
- RAM（内存）
- 磁盘（存储）  
#### 数据库大量使用内存 （RAM）。它有一些很大的优点：
- 确保快速随机访问（下一段将详细介绍）
- 它的大小可能非常大（例如，AWS RDS 云服务为实例提供几 TB 的可用内存）。  
缺点:  
- 当电源关闭时，您将丢失数据。此外，与磁盘相比，它非常昂贵。  
最后，内存的缺点是磁盘存储的优点。它很便宜，即使我们失去电力，数据也会留在那里。但是，天下没有免费的午餐！问题是我们需要小心随机和顺序访问。从磁盘读取速度很快，但仅限于某些条件！
#### 随机和顺序访问































##### 注：[原文](https://blog.allegro.tech/2023/11/how-does-btree-make-your-queries-fast.html)
